<html>


<body>
    <div> this overview </div>
    <ul>
        <li>step by step</li>
        <li>day day up</li>
    </ul>
    <script>
        // 1.0 with or without strict mode when the default value is winodw or undefined  

        
        
        
        // 2.0 Explicit Binding: funciton with call(),apply() and bind()
        
        // 2.0.1
        function func(arg1, arg2) {
            console.log(this);
            console.log(arg1);
            console.log(arg2);
        }

        func.call("a", "b", "c");
        func.call("a", ["b", "c"]);

        var obj = {
            method: function() {
                console.log(this === obj)
            }
        }
        obj.method.call(obj);
        
        
        // 2.0.2 
            function foo() {
            console.log(this.a);
        }
        var obj = {
            a: 2
        }
        var bar = function() {
            foo.call(obj);// hard binding 
        }
        bar.call(window);
        
        setTimeout(bar,100);        
        
        
        //2.0.3 
        function foo(something){
        console.log(this.a,something);
        return this.a + something;
}
        var obj = {
        a:2
}
        var bar = function(){
        return foo.apply(obj,arguments);
            
}
        
        var b  = bar(3);
        console.log(b);  
        
        
        // 2.0.4 
        function foo(something) {
        console.log(this.a, something);
        return this.a + something;
        }
        var obj = {
            a: 2
        }
        var bar = foo.bind(obj);
        var b = bar(3);
        console.log(b);
        
        
        // 2.0.5 
        function foo(el) {
        console.log(el, this.id)
        }
        var obj = {
            id: "test"
        };
        [1, 2, 3].forEach(foo, obj);        
        
        // 2.0.6 
        function foo() {
          console.log(this.a);
        }

        function doFoo(fn) {
           
            fn(); 
        }
        var obj = {
            a: 2,
            foo: foo
        };
        var a = "oops, global"; 
        doFoo( obj.foo );
        
        
        
        
        
        // 3.0 this in constructor 

        var savedThis;

        function Constr() {
            savedThis = this;
            console.log(this);
        }

        var inst = new Constr();
        console.log(savedThis === inst);

        
        
        // 4.0 without new  
        function Point(x, y) {
            this.x = x;
            this.y = y;
        }
        var p = Point(7, 5);
        console.log(p === undefined);
        console.log(x);
        console.log(y);
        //  apply strict mode to have a warning 

      
       

    

        // 5.0  shadowing  this   or   Implicit Binding and lost  
        // 5.0.1
        
        var obj = {
            name: 'Jane',
            friends: ['Tarzan', 'Cheeta'],
            loop: function() {
                'use strict';
                this.friends.forEach(
                    function(friend) {
                        console.log(this.name + ' knows ' + friend);
                    }
                );
            }
        };
        // obj.loop(); // TypeError: Cannot read property 'name' of undefined
        
        
        var obj = {
            name: 'hello world ',
            friends: ['test hello world']
        }
        obj.loop = function() {
                this.friends.forEach(
                    function(friend) {
                        console.log(this === window);
                    });
        }
        obj.loop();
        
        // 5.0.2
         function callIt(func) {
            func();
        }
        var Counter = {
            count: 0,
            inc: function() {
                this.count++;
            }
        }
        //callIt(Counter.inc)();
        // didnot work out Because the this in counter inc  is set to window object        
                

        
        // 6.0 default  new   Implicit   Explicit which one has  lowest priority ? 
        // 6.0.1 defalut:  lowest priority 
        // 6.0.1 Implicit   Explicit    which one has higher proority? 
        //  Explicit  win 
        
        function foo() {
            console.log(this.a);
        }
        var obj1 = {
            a: 2,
            foo: foo
        };
        var obj2 = {
            a: 3,
            foo: foo
        };
        obj1.foo();
        obj2.foo();
        
        obj1.foo.call(obj2);
        obj2.foo.call(obj1);
        
        // 6.0.2 new and Implicit  which one has lowest priority ?
        //new win 
        function foo(something) {
        this.a = something;
        
        }
        
        var obj1 = {
        foo: foo
};
        var obj2 = {};
        
        obj1.foo(2);
        console.log(obj1.a);
        
        obj1.foo.call(obj2,3);
        console.log(obj2.a);
        
        var bar = new obj1.foo(4);
        console.log(obj1.a);
        console.log(bar.a); 
        
        //  6.0.3  Explicit new which one has lowest priority
        //  not 100% confirm : Explicit win
        function foo(something) {
            this.a = something;
        }
        var obj1 = {};
        var bar = foo.bind(obj1);
        bar(2);
        console.log(obj1.a);
        
        var baz= new bar(3);
        console.log(obj1.a);
        console.log(baz.a);        
        
        
        // 7.0 例外 
        //7.0.1 
        //7.0.2
        //7.0.3
        
        
        
        
        
        
     </script>
</body>

</html>
